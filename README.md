# Отчет по базе данных учебного заведения

## Общая информация
- Версия PostgreSQL: 15.3
- Дата создания отчета: 2025-05-21
- Количество таблиц: 8 основных таблиц
- Количество представлений: 3
- Количество функций: 8
- Количество триггеров: 3

## Структура базы данных

### Основные таблицы

1. **student** - Студенты
   - Поля: id, name, group, Birthdate, visible
   - Количество записей: 5
   - Первичный ключ: id

2. **teacher** - Преподаватели
   - Поля: id, fullname, dolgnost
   - Количество записей: 5
   - Первичный ключ: id
   - Триггер: tr_log_teacher_changes (логирует изменения)

3. **subject** - Предметы
   - Поля: id, Name, semestr, visible
   - Количество записей: 5
   - Первичный ключ: id
   - Правило: delete_subject (скрывает вместо удаления)

4. **exams** - Экзамены
   - Поля: ExamDATE, ExamTime, Auditorium, id_exam, id_subject
   - Количество записей: 5
   - Первичный ключ: id_exam
   - Триггер: tr_validate_exam_date (проверяет дату экзамена)

5. **grades** - Оценки
   - Поля: ocenka, IssauDate, id_student, id_exam, id_grade
   - Количество записей: 5
   - Первичный ключ: id_grade
   - Триггер: tr_validate_grade (валидация оценок)

6. **admins** - Администраторы
   - Поля: id, username, password
   - Количество записей: 1

7. **teacher_audit** - Аудит изменений преподавателей
   - Поля: audit_id, operation, teacher_id, changed_by, change_time, old_data, new_data
   - Пока пустая таблица

### Представления

1. **studenti**, **studenta**, **studentt** - разные представления видимых студентов (все идентичны)

## Функции

1. **dolgnost_teacher()** - возвращает должности преподавателей
2. **dolgnostteacher()** - альтернативная версия предыдущей функции
3. **log_teacher_changes()** - логирует изменения в таблице преподавателей
4. **name_student()** - возвращает имена студентов
5. **namestudent()** - альтернативная версия предыдущей функции
6. **semestr_subject()** - возвращает семестры предметов
7. **semestrsubject()** - альтернативная версия предыдущей функции
8. **validate_exam_date()** - проверяет дату экзамена
9. **validate_grade()** - валидирует оценки

## Триггеры

1. **tr_log_teacher_changes** - логирует изменения в таблице преподавателей
2. **tr_validate_exam_date** - проверяет, что экзамен не назначен раньше окончания курса
3. **tr_validate_grade** - проверяет корректность оценок

## Анализ данных

### Студенты
В базе содержится информация о 5 студентах из разных групп (П-12, П-24, П-34, П-42). Самый старший студент родился в 2006 году, остальные - в 2007.

### Преподаватели
Зарегистрировано 5 преподавателей с различными должностями: от преподавателя до директора.

### Предметы
Имеется 5 предметов, распределенных по разным семестрам (от 1 до 5).

### Экзамены
Запланировано 5 экзаменов на 2025 год (июнь и декабрь).

### Оценки
Зафиксировано 5 оценок в диапазоне от 2 до 5.
